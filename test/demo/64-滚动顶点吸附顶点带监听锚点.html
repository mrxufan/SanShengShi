<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<title>滚动顶点吸附顶点带监听锚点</title>
<meta name="description" content="">
<meta name="keywords" content="">
<link href="" rel="stylesheet">
<style type="text/css">
*{margin: 0;padding: 0;}
ul{list-style: none;}
.nav-wrap{width: 100%;background-color: #f40;}
.nav-list{width: 1000px;height: 50px;margin: 0 auto;}
.nav-wrap.fixed{position: fixed;left: 0;top: 0;}
.nav-list li{ cursor: pointer;float: left;height: 50px;line-height: 50px;padding:0 20px;}
.nav-list li.active{background: #333; color: #fff;}
.main-wrap .item{ height: 800px; width: 1000px;text-align: center; line-height: 800px; font-size: 100px; margin: 0 auto;}
</style>
</head>
<body>
<div style="height: 200px;background-color: #333"></div>
<div style="height: 50px">
    <div class="nav-wrap">
        <ul class="nav-list">
            <li class="active">1F</li>
            <li>2F</li>
            <li>3F</li>
            <li>4F</li>
            <li>5F</li>
            <li>6F</li>
            <li>7F</li>
            <li>8F</li>
        </ul>
    </div>
</div>
        
<div class="main-wrap">
    <div class="item" style="background: papayawhip;">1</div>
    <div class="item" style="background: peachpuff;">2</div>
    <div class="item" style="background: peru;">3</div>
    <div class="item" style="background: pink;">4</div>
    <div class="item" style="background: palegoldenrod;">5</div>
    <div class="item" style="background: plum;">6</div>
    <div class="item" style="background: powderblue;">7</div>
    <div class="item" style="background: rosybrown;">8</div>
</div>

<script type="text/javascript" src="js/jquery-1.11.1.min.js"></script>   
<script type="text/javascript">
/*
$(window).scrollTop() 滚动条距离顶部的距离
$(window).height() 当前可见区域的大小
$(document).height() 整个文档(页面)的高度

判断滚动条是否到底
if ($(window).height()+$(window).scrollTop()==$(document).height()) {
    console.log('到达底部');
}
*/


//滚动监听锚点，对应楼层添加class
function scrollTo(){
    var nav = $('.nav-list li');
    var item = $('.main-wrap .item');

    $(window).scroll(function(){
         var winH = $(window).height();
         var sTop = $(window).scrollTop();
         
         item.each(function(){
            if(winH+sTop - $(this).offset().top>=winH-50){
                nav.removeClass('active');
                nav.eq($(this).index()).addClass('active');
            }
         });

         if (sTop>=200) {
            $('.nav-wrap').addClass('fixed');
         } else {
             $('.nav-wrap').removeClass('fixed');
         }
    });

    //点击滚动至对应楼层
    nav.click(function(){
        var t = item.eq($(this).index()).offset().top;
        $('body,html').animate({"scrollTop":t},300);
    });
}

scrollTo();


</script> 
</body>
</html>