<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no">
<title>ajax实例</title>
<style type="text/css">

</style>
</head>
<body>
<button>按钮</button>
<button>按钮</button>
<button>按钮</button>
<ul id="ul1"></ul>
<p id="text"></p>

<script type="text/javascript">
var oBtn=document.getElementsByTagName('button');
var oText=document.getElementById('text');
var oUl=document.getElementById('ul1');




function ajax(url,success,error){
	var oAjax=new XMLHttpRequest();
	oAjax.open('GET',url,true);
	oAjax.send();
	oAjax.onreadystatechange=function(){
		if (oAjax.readyState==4) {
			if (oAjax.status==200) {
				success(oAjax.responseText);
			} else {
				if (error) {
					error();
				}
			}
		}
	};
}

for (var i = 0; i < oBtn.length; i++) {
	oBtn[i].index=i;
	oBtn[i].onclick=function(){
	ajax('page'+(this.index+1)+'.txt',function(str){
		var oUl=document.getElementById('ul1');
		oUl.innerHTML='';
		for (var i = 0; i < oBtn.length; i++) {
			var arr=eval(str);
			var oLi=document.createElement('li');
			oLi.innerHTML='name='+arr[i].user+',pass='+arr[i].pass;
			oUl.appendChild(oLi);
		}
	},function(){
		alert('失败');
	});
};
}



</script>

</body>
</html>
