<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no">
<title>js表格操作（添加、删除、搜索）</title>
<style type="text/css">
table{border-collapse: collapse;}
tbody tr:nth-child(odd){background-color: #eee}
tbody tr:hover{background-color: yellow;}
tbody td{padding:4px 10px;}
</style>
</head>
<body>
<input type="" name="" id="txt">
<input type="button" name="" value="添加" id="btn">
<input type="button" name="" id="search" value="搜索">
<table border="1" width="400" id="tab">
	<thead>
		<td>ID</td>
		<td>姓名</td>
		<td>操作</td>
	</thead>
	<tbody>
		<tr>
			<td>1</td>
			<td>red</td>
			<td></td>
		</tr>
		<tr>
			<td>2</td>
			<td>green</td>
			<td></td>
		</tr>
		<tr>
			<td>3</td>
			<td>blue</td>
			<td></td>
		</tr>
		<tr>
			<td>4</td>
			<td>black</td>
			<td></td>
		</tr>
	</tbody>
</table>



<script type="text/javascript">
var oTab=document.getElementById('tab');
var oTxt=document.getElementById('txt');
var oSearch=document.getElementById('search');
var oBtn=document.getElementById('btn');
var iNow=oTab.tBodies[0].rows.length+1;
// oTab.getElementsByTagName('tbody')[0].getElementsByTagName('tr')[0].getElementsByTagName('td')[1].style.backgroundColor = 'red';

// 等价于：
// alert(oTab.tBodies[0].rows[0].cells[1].innerHTML);


// 隔行变色
// var oldColor='';
// for (var i = 0; i < oTab.tBodies[0].rows.length; i++) {
// 	oTab.tBodies[0].rows[i].style.backgroundColor = i%2?'#ccc':'';

// 	oTab.tBodies[0].rows[i].onmouseover=function(){
// 		oldColor=this.style.backgroundColor;
// 		this.style.backgroundColor = 'yellow';
// 	};
// 	oTab.tBodies[0].rows[i].onmouseout=function(){
// 		this.style.backgroundColor = oldColor;
// 	};
// }




// 获取
// tBodies、tHead、tFoot、rows、cells


// 表格添加
oBtn.onclick=function(){
	var oTr=document.createElement('tr');
	var oTd=null;

	oTd=document.createElement('td');
	oTd.innerHTML=iNow++;
	oTr.appendChild(oTd);

	oTd=document.createElement('td');
	oTd.innerHTML=oTxt.value;
	oTr.appendChild(oTd);

	oTd=document.createElement('td');
	// oTd.innerHTML='&nbsp;';  //添加空内容
	oTd.innerHTML='<a href="javascript:;">删除</a>';
	oTr.appendChild(oTd);

	// 删除事件
	oTd.getElementsByTagName('a')[0].onclick=function(){
		oTab.tBodies[0].removeChild(this.parentNode.parentNode);
	};

	oTab.tBodies[0].appendChild(oTr);
};


// 搜索
oSearch.onclick=function(){
	for (var i = 0; i < oTab.tBodies[0].rows.length; i++) {
		var sValueTab=oTab.tBodies[0].rows[i].cells[1].innerHTML.toLowerCase();
		var sValueTxt=oTxt.value.toLowerCase();
		var arr=sValueTxt.split(' ');

		var bFound=false;
		for (var j = 0; j < arr.length; j++) {
			if (sValueTab.search(arr[j])!=-1) {
				bFound=true;
				break;
			}
		}
		if (bFound) {
			oTab.tBodies[0].rows[i].style.backgroundColor = 'red';
		} else {
			oTab.tBodies[0].rows[i].style.backgroundColor = '';
		}
	}
};
</script>

</body>
</html>
