<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no">
<title>上传图片实例</title>
<style type="text/css">
#box{width: 300px;height: 300px;background-color: red;}
ul{margin: 0;padding: 0;overflow: hidden;}
li{list-style: none;float: left;}
li img{width: 200px;}
</style>
</head>
<body>

<div id="box">将文件拖动到此区域</div>
<ul id="ul"></ul>



<script type="text/javascript">

var obox=document.getElementById('box');
var oul=document.getElementById('ul');

//当被鼠标拖动的对象进入其容器范围内时触发此事件
obox.ondragenter=function () { 
	this.innerHTML='可以释放啦';
};

//当被拖动的对象在另一对象容器范围内拖动时连续触发此事件，即在enter和leave期间连续触发
obox.ondragover=function (ev) { 
	// document.title=i++;
	// return false;
	ev.preventDefault();
};

//当被鼠标拖动的对象离开其容器范围内时触发此事件
obox.ondragleave=function () { 
	this.innerHTML='将文件拖动到此区域';
};

//当被鼠标拖动的对象离开其容器范围内时触发此事件
obox.ondrop=function (ev) { 
	var ev=ev||event;
	ev.preventDefault(); //阻止默认行为，否则会在当前页面打开图片
	var ofiles=ev.dataTransfer.files;

	// alert(ofiles.length);//[object FileList] 从外部拖入文件
	// alert(ofiles[0].type);//文件类型


	// 上传图片实例 单张
	// if (ofiles[0].type.indexOf('image')!=-1) { //判断上传的类型是不是图片
	// 	var fd=new FileReader();
	// 	fd.readAsDataURL(ofiles[0]);
	// 	fd.onload=function () {
	// 		// alert(this.result)
	// 		var oli=document.createElement('li');
	// 		var oimg=document.createElement('img');
	// 		oimg.src=this.result;
	// 		oli.appendChild(oimg);
	// 		oul.appendChild(oli);
	// 	};
	// } else {
	// 	alert('不是图片');
	// }

	// 上传图片实例 多张
	for (var i = 0; i < ofiles.length; i++) {
			if (ofiles[i].type.indexOf('image')!=-1) { //判断上传的类型是不是图片
				var fd=new FileReader();
				fd.readAsDataURL(ofiles[i]);
				fd.onload=function () {
					// alert(this.result)
					var oli=document.createElement('li');
					var oimg=document.createElement('img');
					oimg.src=this.result;
					oli.appendChild(oimg);
					oul.appendChild(oli);
				};
			} else {
				alert('不是图片');
			}
	}
	
	
};



</script>  
</body>
</html>